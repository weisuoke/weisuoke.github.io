# ES2019(ES10)

[[TOC]]

## 1. Array.prototype.flat

> The `**flat()**` method creates a new array with all sub-array elements concatenated into it recursively up to the specified depth.

**Syntax**

```js
var newArray = arr.flat([depth]);
```

**Examples**

1. Flattening nested arrays

```js
var arr1 = [1, 2, [3, 4]];
arr1.flat(); 
// [1, 2, 3, 4]

var arr2 = [1, 2, [3, 4, [5, 6]]];
arr2.flat();
// [1, 2, 3, 4, [5, 6]]

var arr3 = [1, 2, [3, 4, [5, 6]]];
arr3.flat(2);
// [1, 2, 3, 4, 5, 6]

var arr4 = [1, 2, [3, 4, [5, 6, [7, 8, [9, 10]]]]];
arr4.flat(Infinity);
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
```

2. Flattening and array holes

```js
var arr5 = [1, 2, , 4, 5];
arr5.flat();
// [1, 2, 4, 5]
```

## 2. Array.prototype.flatMap

> The `**flatMap()**` method first maps each element using a mapping function, then flattens the result into a new array. It is identical to a `map()`followed by a `flat()`of depth 1, but `flatMap()` is often quite useful, as merging both into one method is slightly more efficient.

**Syntax**

```js
var new_array = arr.flatMap(function callback(currentValue[, index[, array]]) {
    // return element for new_array
}[, thisArg])
```

**Examples**

```js
let arr1 = [1, 2, 3, 4];

arr1.map(x => [x * 2]); 
// [[2], [4], [6], [8]]

arr1.flatMap(x => [x * 2]);
// [2, 4, 6, 8]

// only one level is flattened
arr1.flatMap(x => [[x * 2]]);
// [[2], [4], [6], [8]]
```

```js
// Let's say we want to remove all the negative numbers and split the odd numbers into an even number and a 1
let a = [5, 4, -3, 20, 17, -33, -4, 18]
//       |\  \  x   |  | \   x   x   |
//      [4,1, 4,   20, 16, 1,       18]

a.flatMap( (n) =>
  (n < 0) ?      [] :
  (n % 2 == 0) ? [n] :
                 [n-1, 1]
)

// expected output: [4, 1, 4, 20, 16, 1, 18]
```

## 3. Object.fromEntries()

> The `Object.fromEntries()` method transforms a list of key-value pairs into an object.

**Syntax**

```js
Object.fromEntries(iterable);
```

**Examples**

1. **Converting a `Map` to an `Object`**

```js
const map = new Map([ ['foo', 'bar'], ['baz', 42] ]);
const obj = Object.fromEntries(map);
console.log(obj); // { foo: "bar", baz: 42 }
```

2. **Converting an `Array` to an `Object`**

```js
const arr = [ ['0', 'a'], ['1', 'b'], ['2', 'c'] ];
const obj = Object.fromEntries(arr);
console.log(obj); // { 0: "a", 1: "b", 2: "c" }
```

3. **Object transformations**

```js
const object1 = { a: 1, b: 2, c: 3 };

const object2 = Object.fromEntries(
  Object.entries(object1)
  .map(([ key, val ]) => [ key, val * 2 ])
);

console.log(object2);
// { a: 2, b: 4, c: 6 }
```

## 4. String.trimStart()

## 5. String.trimEnd()

## 6. Optional Catch Binding (catch 的参数可以省略)

## 7. **Array.Sort Stability**

## 8. Symbol.description

## A. 参考阅读

- [20多个小事例带你重温 ES10 新特性](https://juejin.im/post/5d8ff489f265da5ba46f3f9e#heading-11)

- [JavaScript new features in ES2019(ES10)](https://medium.com/javascript-in-plain-english/javascript-es2019-es10-in-a-nutshell-cae6f7524519)

