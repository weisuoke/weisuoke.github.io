(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{289:function(t,e,r){"use strict";r.r(e);var a=r(2),s=Object(a.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"慕课网-基于typescript从零重构axios"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#慕课网-基于typescript从零重构axios","aria-hidden":"true"}},[t._v("#")]),t._v(" 慕课网-基于TypeScript从零重构axios")]),t._v(" "),r("p",[r("TOC",{class:"table-of-contents",attrs:{"list-type":"ul","include-level":[2,3]}},[r("template",{slot:"header"}),r("template",{slot:"footer"})],2)],1),t._v(" "),r("h2",{attrs:{id:"_4-ts-axios项目构建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-ts-axios项目构建","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. ts-axios项目构建")]),t._v(" "),r("h3",{attrs:{id:"_4-1-需求分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-需求分析","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.1 需求分析")]),t._v(" "),r("p",[t._v("需求分析，这次重构需要支持哪些 feature。")]),t._v(" "),r("h4",{attrs:{id:"_4-1-1-features"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-features","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.1.1 Features")]),t._v(" "),r("ul",[r("li",[t._v("在浏览器端使用 XMLHttpRequest 对象通讯")]),t._v(" "),r("li",[t._v("支持 Promise API")]),t._v(" "),r("li",[t._v("支持请求和响应的拦截器")]),t._v(" "),r("li",[t._v("支持请求数据和响应数据的转换")]),t._v(" "),r("li",[t._v("支持请求的取消")]),t._v(" "),r("li",[t._v("JSON 数据的自动转换")]),t._v(" "),r("li",[t._v("客户端防止 XSRF")])]),t._v(" "),r("h3",{attrs:{id:"_4-2-初始化项目"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-初始化项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.2 初始化项目")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/weisuoke/ts-axios",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github地址"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"_4-3-脚手架-typescript-library-starter"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-脚手架-typescript-library-starter","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.3 脚手架 TypeScript library starter")]),t._v(" "),r("p",[t._v("它是一个开源的 Typescript 开发基础库的脚手架工具，可以帮助我们快速初始化一个 Typescript 项目，我们可以去它的"),r("a",{attrs:{href:"https://github.com/alexjoverm/typescript-library-starter",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网地址"),r("OutboundLink")],1),t._v("学习和使用它。")]),t._v(" "),r("p",[r("strong",[t._v("使用方式")])]),t._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("git clone git@github.com:alexjoverm/typescript-library-starter.git ts-axios\ncd ts-axios\n\nnpm install\n")])])]),r("p",[t._v("先通过 "),r("code",[t._v("git clone")]),t._v(" 把项目代码拉下来到我们的 ts- axios 目录，然后运行 "),r("code",[t._v("npm install")]),t._v(" 安装依赖，")]),t._v(" "),r("p",[t._v("并且给项目命名，我们仍然使用 "),r("code",[t._v("ts-axios")]),t._v("。")]),t._v(" "),r("p",[t._v("安装好依赖后，我们先来预览一下这个项目的目录结构。")]),t._v(" "),r("p",[r("strong",[t._v("目录文件介绍")])]),t._v(" "),r("p",[r("code",[t._v("TypeScript library starter")]),t._v("生成的目录结构如下：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-04-12-022904.png",alt:"image-20200412102834023"}})]),t._v(" "),r("p",[r("strong",[t._v("优秀开源工具集成")])]),t._v(" "),r("p",[t._v("使用 "),r("code",[t._v("TypeScript library starter")]),t._v(" 创建的项目集成了很多优秀的开源工具")]),t._v(" "),r("ul",[r("li",[t._v("使用 Rollupjs 帮助我们打包。")]),t._v(" "),r("li",[t._v("使用 Prettier 和 TSLint 帮助我们格式化代码以及保证代码风格一致性")]),t._v(" "),r("li",[t._v("使用 TypeDoc 帮助我们自动生成文档并部署到 Github pages")]),t._v(" "),r("li",[t._v("使用 Jest 帮助我们做单元测试。")]),t._v(" "),r("li",[t._v("使用 Commitizen 帮助我们生成规范化的提交注释。")]),t._v(" "),r("li",[t._v("使用 Semantic release 帮助我们管理版本和发布")]),t._v(" "),r("li",[t._v("使用 husky帮助我们更简单地使用 git hooks")]),t._v(" "),r("li",[t._v("使用 Conventional changelogca 帮助我们通过代码提交信息自动生成 change log")])]),t._v(" "),r("p",[r("strong",[t._v("Npm Scripts")])]),t._v(" "),r("p",[r("code",[t._v("Typescript library starter")]),t._v(" 同样在 "),r("code",[t._v("package.json")]),t._v(" 中帮我们配置了一些 "),r("code",[t._v("npm scripts")]),t._v("，接下来我们先列举一下我们开发中常用的 "),r("code",[t._v("npm scripts")]),t._v("，剩余的我们在之后学习中遇到的时候再来介绍")]),t._v(" "),r("ul",[r("li",[r("p",[r("code",[t._v("npm run lint")]),t._v("：使用 TsLint 工具检查 src 和 test 目录下 Typescript 代码的可读性、可维护性和功能性错误。")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("npm start")]),t._v("：观察者模式运行 rollup 工具打包代码。")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("npm test")]),t._v("：运行 jest 工具跑单元测试。")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("npm run commit")]),t._v("：运行 commitizen 工具提交格式化的 git commit 注释。")])]),t._v(" "),r("li",[r("p",[r("code",[t._v("npm run build")]),t._v("：运行 rollup 编译打包 Typescript 代码，并运行 typedoc 工具生成文档。")])])]),t._v(" "),r("h3",{attrs:{id:"_4-4-关联远程仓库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-关联远程仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.4 关联远程仓库")]),t._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 查看当前文件加的远程信息\ngit remote -v\n\n# 关联远程分支\ngit remote add origin <git repo>\n")])])])])},[],!1,null,null,null);e.default=s.exports}}]);